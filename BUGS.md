# Найденные баги для исправления

## Дата: Сегодня
## Статус: Все баги исправлены ✅

### 1. Проблема с взрывом динамита ✅ ИСПРАВЛЕНО
**Описание**: Вокруг динамита не взрывались гемы при активации
**Ожидаемое поведение**: Динамит должен взрывать гемы в радиусе 2 клеток
**Причина**: Ошибка в функции `explodeDynamiteArea()` - проверялись только обычные гемы (типы 1-5), игнорировались специальные гемы
**Исправление**: Изменено условие с `gemType >= 1 && gemType <= 5` на `gemType > 0` для взрыва всех гемов
**Файл**: `src/scenes/main-scene.js`
**Функция**: `explodeDynamiteArea()`

### 2. Неправильное размещение динамита при L-образной фигуре ✅ ИСПРАВЛЕНО
**Описание**: При сборе L-образной фигуры динамит создавался в центре фигуры вместо угла
**Ожидаемое поведение**: Динамит должен появляться в угловой позиции L-фигуры
**Причина**: Ошибка в функции `animateDynamiteCreation()` - использовался расчет центра вместо угловой позиции
**Исправление**: Изменена логика позиционирования с центра на угловую позицию (первый элемент массива shape)
**Файл**: `src/scenes/main-scene.js` 
**Функция**: `animateDynamiteCreation()`

### 3. Дискошар удаляет неправильный цвет ✅ ИСПРАВЛЕНО
**Описание**: При перемещении синего гема на дискошар исчезали желтые гемы вместо синих
**Ожидаемое поведение**: Должны исчезать гемы того цвета, который был перемещен на дискошар (синие)
**Причина**: Ошибка в логике определения цвета в функции `activateDiscoBallMove()` - цвет брался из целевой позиции вместо исходной
**Исправление**: Изменена логика определения цвета с `this.grid[to.y][to.x]` на `this.grid[from.y][from.x]`
**Файл**: `src/scenes/main-scene.js`
**Функция**: `activateDiscoBallMove()`

---

## Приоритет исправления
1. ~~**Высокий**: Баг #3 (дискошар) - критическая игровая механика~~ ✅ ИСПРАВЛЕНО
2. ~~**Средний**: Баг #1 (динамит) - спецгем не работает как задумано~~ ✅ ИСПРАВЛЕНО
3. ~~**Средний**: Баг #2 (позиция динамита) - влияет на игровой опыт~~ ✅ ИСПРАВЛЕНО

## Примечания
- Все баги с динамитом и дискошаром исправлены
- Все баги были связаны с недавно добавленными спецгемами
- Требуется тестирование после исправления каждого бага
- Возможно потребуется дополнительная отладка детерминистического поведения 